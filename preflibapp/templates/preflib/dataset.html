{% load static %}
{% load extratags %}

<!DOCTYPE html>
<html>
<head>
	{% include 'includes/htmlheadercontent.html' %}
	<title>Preflib</title>
</head>

<body>

{% include 'includes/header.html' %}

<div class="content">
    <h1>{{ dataset.name }} ({{ dataset.series_number }})</h1>

<div class="side-by-side-wrapper">
	<div>
		{% autoescape off %}
		<p>{{ dataset.description }}</p>
		{% endautoescape %}

		{% if dataset.required_citations %}
			{% autoescape off %}
			<p><span class="bold">Required citations:</span> {{ dataset.required_citations }} </p>
			{% endautoescape %}
		{% endif %}

		{% if dataset.required_citations %}
			{% autoescape off %}
			<p><span class="bold">Selected studies:</span> {{ dataset.selected_studies }} </p>
			{% endautoescape %}
		{% endif %}

		<p class="center" style="margin-top: 30px;"><a href="{% static dataset.zip_file_path %}" class="download-button">Download the dataset [zip, {{ dataset.zip_file_size|filesizeformat }}]</a></p>
	</div>

	<div class="side-by-side-right">
		<h2>Details</h2>
		<ul>
			<li> Number of files: {{ num_files }}</li>
			<li> Total size: {{ total_size|filesizeformat }}</li>
			<li> Data types:
				{% for data_type in all_types %}
					{% if forloop.last %}
						<a href="{% url 'preflibapp:data-format' %}#{{data_type.0}}">{{ data_type.0 }}</a>.
					{% else %}
						<a href="{% url 'preflibapp:data-format' %}#{{data_type.0}}">{{ data_type.0 }}</a>,
					{% endif %}
				{% endfor %} 
			</li>
			<li> Publication date: {{ dataset.publication_date }} </li>
			<li> Last modification: {{ dataset.modification_date }} </li>
		</ul>
	</div>
</div>

<h2>Data Files</h2>

<div class="all-data-files">

    {% for file in data_files %}
        <div class="data-file-wrapper">
            {{ file.file_name }}
            <a href="{% static file.file_path %}" class="download-button">Download [{{ file.file_size|filesizeformat }}]</a>
        </div>
    {% endfor %}

</div>

{% include 'includes/paginator.html' %}

</div>
</body>

{% include 'includes/footer.html' %}

</html>