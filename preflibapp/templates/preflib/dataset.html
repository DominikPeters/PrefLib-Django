{% load static %}
{% load extratags %}

<!DOCTYPE html>
<html>
<head>
	{% include 'includes/htmlheadercontent.html' %}
	<title>Preflib</title>
</head>

<body>

{% include 'includes/header.html' %}

<div class="content">
<h1>{{ dataset.category }}-{{ dataset.series_number }}: {{ dataset.name }}</h1>

<div class="indexContent-wrap">
	<div class="indexMainContent">
		{% autoescape off %}
		<p>{{ dataset.description }}</p>
		{% endautoescape %}

		{% if dataset.required_citations %}
			{% autoescape off %}
			<p><span style="font-weight: bold;">Required citations:</span> {{ dataset.required_citations }} </p>
			{% endautoescape %}
		{% endif %}

		{% if dataset.required_citations %}
			{% autoescape off %}
			<p><span style="font-weight: bold;">Selected studies:</span> {{ dataset.selected_studies }} </p>
			{% endautoescape %}
		{% endif %}

		<p id="center_p" style="margin-top: 30px;"><a href="{% static zipfile_path %}" class="download-button">Download the dataset [zip, {{ total_size|filesizeformat }}]</a></p>
	</div>

	<div class="indexRightContent">
		<h2>Details</h2>
		<ul>
			<li> Number of files: {{ num_files }}</li>
			<li> Total size: {{ total_size|filesizeformat }}</li>
			<li> Data types:
				{% for data_type in all_types %}
					{% if forloop.last %}
						<a href="{% url 'preflibapp:datatypes' %}#{{data_type.0}}">{{ data_type.0 }}</a>.
					{% else %}
						<a href="{% url 'preflibapp:datatypes' %}#{{data_type.0}}">{{ data_type.0 }}</a>,
					{% endif %}
				{% endfor %} 
			</li>
			<li> Publication date: {{ dataset.publication_date }} </li>
			<li> Last modification: {{ dataset.modification_date }} </li>
		</ul>
	</div>
</div>

<h2>Data Files</h2>

<table>
    <tr>
        <th>
            <td>Name</td>
        </th>
    </tr>
    {% for file in ds.files %}
        <tr>
            <td>{{ file.fileName }}</td>
            <td><a href="{% static file.file_path %}" class="download-button">Download [{{ file.file_size|filesizeformat }}]</a></td>
        </tr>
    {% endfor %}
</table>

{% include 'includes/paginator.html' %}

</div>
</body>

{% include 'includes/footer.html' %}

</html>