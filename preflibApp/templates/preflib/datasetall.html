{% load static %}

<!DOCTYPE html>
<html>
<head>
	{% include 'includes/htmlHeaderContent.html' %}
	<title>Preflib</title>
</head>

<body>

{% include 'includes/header.html' %}

<div class="content">

<h1> {{ title|capfirst }} data sets </h1>

{% if datasets %}

	<p>Here is a list of all the data sets in the {{ title }} category, showing 20 per page.</p>
	
	{% include 'includes/paginator.html' %}
	
	{% for dsinfo in datasetInfo %}
	{% with dsinfo.ds as ds %}
		<h2><a href="{% url 'preflibapp:dataset' ds.category ds.seriesNumber %}" id="{{ds.category}}{{ds.seriesNumber}}"> {{ ds.name }} </a></h2>

		{% autoescape off %}
		<p> {{ ds.description }} </p>
		{% endautoescape %}

		<p class="data-patch-list">
			Consists of {{ dsinfo.nbPatches }} data patch{{ dsinfo.nbPatches|pluralize:"es" }}:
			{% for patch in dsinfo.patches %}
				<span class="data-patch"><a href="{% url 'preflibapp:datapatch' ds.category ds.seriesNumber patch.seriesNumber %}">{{ patch.description }}</a></span>
			{% endfor %}
			{% if dsinfo.nbPatchesNotShown > 0 %}
				and {{ dsinfo.nbPatchesNotShown }} more.
			{% endif %}
		</p>

		<p class="button-row">
			<a href="{% url 'preflibapp:dataset' ds.category ds.seriesNumber %}" class="details-button">Details</a>
			<a href="{% static dsinfo.zipFile %}" class="downloadButton">Download [zip, {{dsinfo.zipFileSize|filesizeformat}}]</a>
		</p>
	{% endwith %}
	{% endfor %}

	{% include 'includes/paginator.html' %}
	
{% else %}
	<p> There are no such dataset right now, do you want to contribute? </p>
{% endif %}

</div>
</body>

{% include 'includes/footer.html' %}

</html>